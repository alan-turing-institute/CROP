language: python

services:
  - postgresql

install:
  - pip install -r requirements.txt

env:
  -CROP_SQL_HOST="localhost"
  -CROP_SQL_USER="postgres"
  -CROP_SQL_PASS="postgres"
  -CROP_SQL_DBNAME="cropdb"
  -CROP_SQL_PORT="5432"

before_script:
  - psql -c "CREATE DATABASE cropdb;" -U postgres

script:
  - export PYTHONPATH=$PYTHONPATH:$(pwd)/CROP/core
  - cd core
  - pytest