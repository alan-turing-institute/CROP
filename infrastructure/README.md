To stand up the whole CROP stack on Azure, make sure you've sourced `.secrets/crop.sh`, and then run `pulumi up`. Once all the resources have been created, you should in principle be able to log into the website. In practice I've found that I may have to restart the webapp and the function apps before some configurations take effect (e.g. default_user password) and the functions actually start running.

Note that your database will be empty of data, although the schema will be there. If you already have an instance of CROP running and want to copy the data over, use the script `dump.sh` to do a PostgreSQL dump of your old database, and `restore.sh` to upload that dump into your new database. See the docstrings at the top of the script files for the arguments you need to provide.

If you create a new stack, you'll have to set a number of configurations, most of them secrets, with `pulumi config set --secret`. You can look at all the necessary ones at the top of `__main__.py`, or you can run `pulumi up` and add them one by one once it no longer errors. One non-obvious and optional one to note is `postgres-allowed-ips`, which can be set to a comma-separated list of IP addresses, that are whitelisted for the postgres server. You may want to for instance add the IP of your deveploment machine, to be able to manually access the postgres server.
